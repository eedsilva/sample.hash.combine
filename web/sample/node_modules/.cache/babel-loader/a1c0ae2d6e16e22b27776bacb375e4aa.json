{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\")),\n    _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\")),\n    _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\")),\n    _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\")),\n    _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\")),\n    _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\")),\n    _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\")),\n    _scatterjsCore = require(\"scatterjs-core\"),\n    proxy = function proxy(a, b) {\n  return new Proxy(a, b);\n},\n    cache = {},\n    ScatterEOS =\n/*#__PURE__*/\nfunction (a) {\n  function b() {\n    return (0, _classCallCheck2.default)(this, b), (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(b).call(this, _scatterjsCore.Blockchains.EOS, _scatterjsCore.PluginTypes.BLOCKCHAIN_SUPPORT));\n  }\n\n  return (0, _inherits2.default)(b, a), (0, _createClass2.default)(b, [{\n    key: \"hookProvider\",\n    value: function hookProvider(a) {\n      var b = 1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : null;\n      return a = _scatterjsCore.Network.fromJson(a), {\n        requiredFields: {},\n        getAvailableKeys: function () {\n          var a = (0, _asyncToGenerator2.default)(\n          /*#__PURE__*/\n          _regenerator.default.mark(function a() {\n            return _regenerator.default.wrap(function (a) {\n              for (;;) {\n                switch (a.prev = a.next) {\n                  case 0:\n                    return a.next = 2, _scatterjsCore.SocketService.sendApiRequest({\n                      type: \"identityFromPermissions\",\n                      payload: {}\n                    }).then(function (a) {\n                      return a ? a.accounts.filter(function (a) {\n                        return a.blockchain === _scatterjsCore.Blockchains.EOS;\n                      }).map(function (a) {\n                        return a.publicKey;\n                      }) : [];\n                    });\n\n                  case 2:\n                    return a.abrupt(\"return\", a.sent);\n\n                  case 3:\n                  case \"end\":\n                    return a.stop();\n                }\n              }\n            }, a, this);\n          }));\n          return function getAvailableKeys() {\n            return a.apply(this, arguments);\n          };\n        }(),\n        sign: function () {\n          var c = (0, _asyncToGenerator2.default)(\n          /*#__PURE__*/\n          _regenerator.default.mark(function c(d) {\n            var e;\n            return _regenerator.default.wrap(function (c) {\n              for (;;) {\n                switch (c.prev = c.next) {\n                  case 0:\n                    return e = b ? b() : {}, d.serializedTransaction = Buffer.from(d.serializedTransaction).toString(\"hex\"), c.abrupt(\"return\", new Promise(\n                    /*#__PURE__*/\n                    function () {\n                      var b = (0, _asyncToGenerator2.default)(\n                      /*#__PURE__*/\n                      _regenerator.default.mark(function b(c, f) {\n                        var g;\n                        return _regenerator.default.wrap(function (b) {\n                          for (;;) {\n                            switch (b.prev = b.next) {\n                              case 0:\n                                g = {\n                                  transaction: d,\n                                  blockchain: _scatterjsCore.Blockchains.EOS,\n                                  network: a,\n                                  requiredFields: e\n                                }, _scatterjsCore.SocketService.sendApiRequest({\n                                  type: \"requestSignature\",\n                                  payload: g\n                                }).then(function (a) {\n                                  return c(a.signatures);\n                                }).catch(function (a) {\n                                  return f(a);\n                                });\n\n                              case 2:\n                              case \"end\":\n                                return b.stop();\n                            }\n                          }\n                        }, b, this);\n                      }));\n                      return function () {\n                        return b.apply(this, arguments);\n                      };\n                    }()));\n\n                  case 3:\n                  case \"end\":\n                    return c.stop();\n                }\n              }\n            }, c, this);\n          }));\n          return function sign() {\n            return c.apply(this, arguments);\n          };\n        }()\n      };\n    }\n  }, {\n    key: \"signatureProvider\",\n    value: function signatureProvider() {\n      var a = this,\n          b = 0 >= arguments.length ? void 0 : arguments[0]; // Protocol will be deprecated.\n\n      return function (b, c) {\n        var d = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : {};\n        b = _scatterjsCore.Network.fromJson(b);\n\n        var e = {},\n            f = function f() {\n          return e;\n        },\n            g = a.hookProvider(b, f); // The proxy stands between the eosjs object and scatter.\n        // This is used to add special functionality like adding `requiredFields` arrays to transactions\n\n\n        return proxy(new c(Object.assign(d, {\n          signatureProvider: g\n        })), {\n          get: function get(a, b) {\n            return function () {\n              if (\"undefined\" == typeof a[b]) throw new Error(\"\".concat(b, \" does not exist on the eosjs.Api() object.\"));\n\n              for (var c = arguments.length, d = Array(c), f = 0; f < c; f++) {\n                d[f] = arguments[f];\n              }\n\n              var g = d.find(function (a) {\n                return a.hasOwnProperty(\"requiredFields\");\n              });\n              return e = g ? g.requiredFields : {}, a[b].apply(a, d);\n            };\n          }\n        }); // Proxy\n      };\n    }\n  }]), b;\n}(_scatterjsCore.Plugin);\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: !0\n}), exports.default = void 0;\nexports.default = ScatterEOS, \"undefined\" != typeof window && (window.ScatterEOS = ScatterEOS);","map":null,"metadata":{},"sourceType":"script"}